function dx = optim_control_nlmpc(x,u)

akt = u';
SC_AC = [-0.0143,0.02,0.1355];
c_COM = [-0.0110972, 0.00637508, 0.0541825];
AC_GH = [-0.009,-0.034,0.009];
s_COM = [-0.0512948, -0.0367122, -0.0430756];
h_COM = [0.000389382, -0.116338, -0.00231072];
c = 1;
mc = 0.0370005*2;
ms = 0.12759*2;
mh = 2;
Ic = 0.01;
Is = 0.02;
Ih = 0.03;
g = 9.80665;
koef = [mc ms mh Ic Is Ih g c];
F0M = [500,600,400,2500,700,600,1300,300,600,700,700,450,500]*(-1);
L0M = [0.3,0.11,0.07,0.145,0.13,0.12,0.135,0.1,0.06,0.13,0.13,0.13,0.135];
t = 0;

dx = zeros(6,1);
mm = MM(t,x,koef,SC_AC,c_COM,AC_GH,s_COM,h_COM);
fo = FO(t,x,koef,SC_AC,c_COM,AC_GH,s_COM,h_COM);
fe = FE(t,x,F0M,L0M,akt);
dx = mm\(fo+fe);